# Домашнее задание к занятию "6.6. Troubleshooting"

## Задача 1


### Ответ:
- Определим текущую операцию командой:  
       ```
       db.currentOp()
       ```
- Завершим операцию по opid:
       ```
       db.killOp()
       ``` 
- Чтобы не было долгих запросов, необходимо постороить/перестроить соответствующий индекс

## Задача 2


### Ответ:

- Предпологаю, что проблема связана с исчерпанием ресурсов оперативной памяти. 
 
## Задача 3


### Ответ:

Предполагаю что ошибки начали возникать из-за роста нагрузки. 
В качестве решения можно предложить:
   1. Увеличить значение параметров : connect_timeout, interactive_timeout, wait_timeout
   2. Добавить ресурсов на машине
   3. Создать индексы для оптимизации  и ускорения запросов (определить по плану запросов)

Так же могут быть сбои на сетевой инфраструктуре, в таком случае необходимо увеличивать [net_read_timeout](https://dev.mysql.com/doc/refman/5.7/en/error-lost-connection.html).
Как дополнительный вариант можно расширить максимальное число соединений :  [max_connections](https://www.opennet.ru/docs/RUS/sql_error/chap10.html).

## Задача 4


### Ответ:
Причина в недостатке ресурсов оперативной памяти, в результате ОС завершает процессы утилизирующие память, чтобы предотвратить падение всей системы.
Для предотвращения сбоев , необходимо увеличить объем ОЗУ или выставить ограничение в настройках PG на использование ресурсов хоста, 
чтобы исключить потребление всех ресурсов на машине.
